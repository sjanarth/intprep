package com.intprep;

public class SortQuick {

	private static int[] sort (int[] input)	{
		if (input.length < 2)
			return input;
		int pivotInd = input.length/2;
		debug ("pivotInd="+pivotInd);
		int pivotVal = input[pivotInd];
		debug ("pivotVal="+pivotVal);
		int leftCount = 0;
		for (int i = 0; i < input.length; i++) {
			if (input[i] < pivotVal)
				leftCount++;
		}
		debug ("leftCount="+leftCount);
		int[] leftArr = new int[leftCount];
		int[] rightArr = new int[input.length-leftCount-1];
		
		int leftInd = 0;
		int rightInd = 0;
		
		for (int i = 0; i < input.length; i++) {
			if (input[i] < pivotVal)	{
				leftArr[leftInd++] = input[i];
			} else if (input[i] > pivotVal) {
				rightArr[rightInd++] = input[i];
			}
		}
		
		printArray("leftArr", leftArr);
		printArray("rightArr", rightArr);
		
		debug ("--------------------------------------------");
		leftArr = sort(leftArr);
		rightArr = sort(rightArr);
		
		printArray("sorted(leftArr)", leftArr);
		printArray("sorted(rightArr)", rightArr);
		for (int i = 0; i < leftCount; i++)
			input[i] = leftArr[i];
		for (int i = leftCount+1, j = 0; i < input.length; i++, j++)
			input[i] = rightArr[j];

		return input;
	}
	
	private static void debug (String s)	{
		System.out.println(s);
	}
	
	private static void printArray (String s, int[] arr) {
		System.out.print(s+":");
		for (int i : arr)
			System.out.print(" "+i);
		System.out.println ();
	}
	
	public static void main (String[] args)	{
		int[] input = new int[] { 31, 3, 42, -5, 8, 6, 1, 49, 888, 91};
		printArray("input", input);
		printArray("output", sort(input));
	}
}
